import{j as e}from"./config.DA722Lej.js";import{r as c}from"./index.BVn2TZg3.js";import{C as w,a as _}from"./card.BSoSeF1_.js";import{L as S}from"./label.C2QC9qaa.js";import{c as p}from"./createLucideIcon.Cw3puCNq.js";import{I as C,V as L}from"./video.BZwMdyWj.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],W=p("loader-circle",U);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],F=p("upload",k),H=({onUpload:m,label:x="Subir archivo",acceptType:r="both"})=>{const f="incadev",g="dshi5w2wt",[t,v]=c.useState(""),[a,j]=c.useState(""),[i,u]=c.useState(!1),y=()=>r==="image"?"image/*":r==="video"?"video/*":"image/*,video/*",N=async h=>{const o=h.target.files;if(!o||o.length===0)return;const s=o[0];if(j(s.type),r==="image"&&!s.type.startsWith("image/")||r==="video"&&!s.type.startsWith("video/")){alert(`Solo se permiten archivos de tipo ${r}.`),h.target.value="";return}const l=new FormData;l.append("file",s),l.append("upload_preset",f),u(!0);try{const n=s.type.startsWith("video/")?"video":"image",d=await(await fetch(`https://api.cloudinary.com/v1_1/${g}/${n}/upload`,{method:"POST",body:l})).json();if(d.secure_url)v(d.secure_url),m&&m(d.secure_url);else throw new Error("No se recibió la URL del archivo.")}catch(n){console.error("Error al subir archivo:",n)}finally{u(!1)}},b=()=>a.startsWith("image/")?e.jsx("img",{src:t,alt:"Vista previa",className:"h-full w-full object-cover rounded-lg border"}):a.startsWith("video/")?e.jsx("video",{controls:!0,className:"w-full rounded-lg border",children:e.jsx("source",{src:t,type:a})}):null;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"file-upload",className:"text-sm font-medium",children:x}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"file-upload",type:"file",name:"file",accept:y(),onChange:N,className:"sr-only",disabled:i}),e.jsx("label",{htmlFor:"file-upload",className:`flex flex-col items-center justify-center w-full h-32 px-4 py-6 border-2 border-dashed rounded-lg cursor-pointer transition-all ${i?"border-gray-300 bg-gray-50 cursor-not-allowed":"border-gray-300 hover:border-primary hover:bg-accent/50"}`,children:i?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(W,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subiendo archivo..."})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(F,{className:"h-8 w-8 text-muted-foreground"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Haz clic para cargar"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r==="image"?"Solo se permiten imágenes":r==="video"?"Solo se permiten videos":"Se permiten imágenes y videos"})]})]})})]})]}),t&&!i&&e.jsx(w,{className:"overflow-hidden",children:e.jsxs(_,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[a.startsWith("image/")?e.jsx(C,{className:"h-5 w-5 text-primary"}):e.jsx(L,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{children:"Vista previa"})]}),b(),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2",children:[e.jsx("span",{children:"Archivo cargado exitosamente"}),e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Ver original"})]})]})})]})};export{H as C,W as L,F as U};
