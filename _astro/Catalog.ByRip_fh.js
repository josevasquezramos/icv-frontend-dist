import{c as u,j as e,B as f}from"./config.DA722Lej.js";import{r as t}from"./index.BVn2TZg3.js";import{c as y,I as g,S,A as I,a as k,b as L}from"./site-header.CcIO_pl4.js";import{C as j,b as _,c as B,d as E,a as M,e as q}from"./card.BSoSeF1_.js";import{I as $}from"./input.BGbgNwpT.js";import{B as r}from"./badge.FyzJaTHz.js";import{I as A}from"./IconLoader.CpSXqs7V.js";import{I as F}from"./IconClock.DGc1Ztyo.js";import{I as z}from"./IconVideo.BIWMJyzU.js";import"./createLucideIcon.Cw3puCNq.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-0"}],["path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-1"}],["path",{d:"M3 6l0 13",key:"svg-2"}],["path",{d:"M12 6l0 13",key:"svg-3"}],["path",{d:"M21 6l0 13",key:"svg-4"}]],N=y("outline","book","Book",T);function V({token:o}){const[a,i]=t.useState(""),[n,d]=t.useState([]),[m,l]=t.useState(!0);t.useEffect(()=>{c()},[]);const c=async()=>{l(!0);try{const s=o?.replace(/^"|"$/g,""),h=await(await fetch(`${u.apiUrl}${u.endpoints.courses.getAll}`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).json();console.log("Cursos cargados:",h),d(h)}catch(s){console.error("Error cargando cursos:",s)}finally{l(!1)}},x=n.filter(s=>s.status&&(s.title.toLowerCase().includes(a.toLowerCase())||s.name&&s.name.toLowerCase().includes(a.toLowerCase())||s.description&&s.description.toLowerCase().includes(a.toLowerCase())||s.level.toLowerCase().includes(a.toLowerCase()))),v=s=>{switch(s.toLowerCase()){case"basic":case"básico":return"bg-green-500/10 text-green-500 border-green-500/20";case"intermediate":case"intermedio":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"advanced":case"avanzado":return"bg-red-500/10 text-red-500 border-red-500/20";default:return"bg-blue-500/10 text-blue-500 border-blue-500/20"}},b=s=>({basic:"Básico",intermediate:"Intermedio",advanced:"Avanzado"})[s.toLowerCase()]||s,p=s=>`S/ ${parseFloat(s).toFixed(2)}`,w=s=>{typeof window<"u"&&(window.location.href=`/academico/dashboard/grupos-disponibles?courseId=${s.id}`)};return m?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(A,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"w-full space-y-6 p-4 md:p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Explora Nuestros Cursos"}),e.jsx("p",{className:"text-muted-foreground text-base md:text-lg mt-2",children:"Encuentra el curso perfecto para impulsar tu carrera profesional"})]}),e.jsxs("div",{className:"relative max-w-2xl",children:[e.jsx(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx($,{type:"text",placeholder:"Buscar por título, nombre, nivel o descripción...",value:a,onChange:s=>i(s.target.value),className:"pl-10 h-12 text-base"})]}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs(r,{variant:"secondary",className:"text-sm px-4 py-2",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),x.length," cursos disponibles"]}),a&&e.jsxs(r,{variant:"outline",className:"text-sm px-4 py-2",children:['Mostrando resultados para: "',a,'"']})]})]}),x.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(s=>e.jsxs(j,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group flex flex-col",onClick:()=>w(s),children:[e.jsxs("div",{className:"relative h-48 w-full overflow-hidden bg-muted",children:[e.jsx("img",{src:s.course_image||"/academico/images/9440461.webp",alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(r,{className:v(s.level),children:b(s.level)})}),s.bestseller&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(r,{className:"bg-amber-500/90 text-white border-0",children:"Bestseller"})}),s.featured&&e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx(r,{className:"bg-purple-500/90 text-white border-0",children:"Destacado"})}),s.highest_rated&&e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsx(r,{className:"bg-blue-500/90 text-white border-0",children:"Mejor Valorado"})})]}),e.jsxs(_,{className:"space-y-2",children:[e.jsx(B,{className:"line-clamp-2 group-hover:text-primary transition-colors",children:s.title}),s.name&&e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s.name}),e.jsx(E,{className:"line-clamp-3 text-sm",children:s.description||"Sin descripción disponible"})]}),e.jsxs(M,{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground flex-wrap",children:[s.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsxs("span",{children:[parseFloat(s.duration).toFixed(0),"h"]})]}),s.sessions&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.sessions," sesiones"]})]}),s.video_url&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:"Video"})]})]}),s.prerequisites&&e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium",children:"Pre-requisitos:"}),e.jsx("span",{className:"text-muted-foreground ml-1",children:s.prerequisites})]}),s.certificate_issuer&&e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium",children:"Certificado por:"}),e.jsx("span",{className:"text-muted-foreground ml-1",children:s.certificate_issuer})]}),e.jsx("div",{className:"pt-2",children:s.discount_price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-primary",children:p(s.discount_price)}),e.jsx("span",{className:"text-sm text-muted-foreground line-through",children:p(s.selling_price)})]}):e.jsx("span",{className:"text-lg font-bold",children:p(s.selling_price)})})]}),e.jsx(q,{children:e.jsx(f,{className:"w-full group-hover:bg-primary/90",size:"lg",children:"Ver Grupos Disponibles"})})]},s.id))}):e.jsx(j,{className:"p-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(g,{className:"h-16 w-16 text-muted-foreground"})}),e.jsx("h3",{className:"text-2xl font-semibold",children:"No se encontraron cursos"}),e.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto",children:['No pudimos encontrar ningún curso que coincida con "',a,'". Intenta con otros términos de búsqueda.']}),e.jsx(f,{variant:"outline",onClick:()=>i(""),className:"mt-4",children:"Limpiar búsqueda"})]})})]})}function K(){const[o,a]=t.useState(null),[i,n]=t.useState(null),[d,m]=t.useState(!1);return t.useEffect(()=>{const l=window.localStorage.getItem("token"),c=window.localStorage.getItem("user");console.log(l),a(l??null);try{n(c?JSON.parse(c):null)}catch{n(null)}m(!0)},[]),d?e.jsxs(S,{style:{"--sidebar-width":"calc(var(--spacing) * 72)","--header-height":"calc(var(--spacing) * 12)"},children:[e.jsx(I,{variant:"inset",token:o,user:i}),e.jsxs(k,{children:[e.jsx(L,{title:"Catálogo de grupos"}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:e.jsx(V,{token:o})})})]})]}):null}export{K as default};
