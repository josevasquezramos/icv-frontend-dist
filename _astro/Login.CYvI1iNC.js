import{j as e,a as f,B as j,c}from"./config.DA722Lej.js";import"./index.BVn2TZg3.js";import{u as b,a as w,F as N,b as i,c as d,e as v,G as y,d as S}from"./google-login-button.PYogUplw.js";import{I as m}from"./input.BGbgNwpT.js";import{t as r}from"./index.DTvBjT24.js";import{o as I,s as x}from"./types.C7jWjZvw.js";import"./label.C2QC9qaa.js";const F=I({email:x().min(1,{message:"El correo electrónico es obligatorio."}),password:x().min(8,{message:"La contraseña debe tener al menos 8 caracteres."}).max(20,{message:"La contraseña no debe exceder los 20 caracteres."})});function L({className:p,...g}){const{register:o,handleSubmit:h,formState:{errors:a,isSubmitting:n}}=b({resolver:w(F),defaultValues:{email:"",password:""}});async function u(t){try{const l=await fetch(`${c.apiUrl}${c.endpoints.auth.login}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})});if(l.ok){const s=await l.json();console.log("Login response:",s),localStorage.setItem("token",JSON.stringify(s.token)),localStorage.setItem("user",JSON.stringify(s.user)),r.success("¡Inicio de sesión exitoso!",{description:"Redirigiendo a tu dashboard."}),setTimeout(()=>{window.location.href="/academico/dashboard"},2e3)}else{const s=await l.json();r.error(`Error: ${s.message||"Algo salió mal."}`)}}catch{r.error("Hubo un error al conectar con el servidor.")}r.info("Datos del formulario:",{description:e.jsx("pre",{className:"mt-2 w-[320px] rounded-md bg-neutral-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(t,null,2)})})})}return e.jsx("form",{className:f("flex flex-col gap-6",p),onSubmit:h(u),...g,children:e.jsxs(N,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Inicia sesión en tu cuenta"}),e.jsx("p",{className:"text-muted-foreground text-sm text-balance",children:"Ingresa tu correo electrónico para acceder a tu cuenta"})]}),e.jsxs(i,{children:[e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",type:"email",placeholder:"m@example.com",...o("email")}),a.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.email.message})]}),e.jsxs(i,{children:[e.jsx(d,{htmlFor:"password",children:"Contraseña"}),e.jsx(m,{id:"password",type:"password",placeholder:"Ingresa tu contraseña",...o("password")}),a.password&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.password.message})]}),e.jsx(i,{children:e.jsx(j,{type:"submit",disabled:n,className:"w-full",children:n?"Iniciando sesión...":"Iniciar sesión"})}),e.jsx(v,{children:"O continúa con"}),e.jsxs(i,{children:[e.jsx(y,{text:"Iniciar Sesión con Google"}),e.jsxs(S,{className:"text-center",children:["¿No tienes una cuenta?"," ",e.jsx("a",{href:"/academico/register",className:"underline underline-offset-4",children:"Regístrate"})]})]})]})})}function G(){return e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx("img",{src:"/academico/images/bg-login-pc.webp",alt:"Imagen de bienvenida",className:"w-md h-md lg:w-lg lg:h-lg xl:w-5xl xl:h-5xl",loading:"lazy"})}),e.jsxs("div",{className:"md:hidden w-full relative p-0",children:[e.jsx("div",{className:"m-0 h-full w-full absolute",children:e.jsx("div",{className:"overflow-hidden h-full absolute w-full",children:e.jsx("img",{src:"/academico/images/bg-message.webp",alt:" Imagen de bienvenida",className:"w-full h-full scale-160 object-cover",loading:"lazy"})})}),e.jsxs("div",{className:"relative w-full h-full pt-18 p-8 md:p-10 md:pb-0 sm:p-15 sm:pb-0 pb-0",children:[e.jsx("div",{className:"",children:e.jsx("h1",{className:"text-5xl sm:text-6xl font-semibold mb-2 text-white",children:"¡Bienvenido!"})}),e.jsxs("div",{className:"flex w-full mb-0 p-0 justify-between flex-wrap",children:[e.jsx("p",{className:"w-1/2 text-xl sm:text-3xl font-light text-white",children:"Que esperas para capacitarte."}),e.jsx("div",{className:"w-1/2",children:e.jsx("img",{src:"/academico/images/bg-login-guy.webp",alt:"Imagen de bienvenida",className:"object-cover scale-x-[-1]",loading:"lazy"})})]})]})]}),e.jsx("div",{className:"flex items-center justify-center px-5 sm:px-10 lg:px-0 md:rounded-none md:mt-0 rounded-b-none rounded-4xl z-20 mt-[-50px] bg-theme-night pt-10",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(L,{})})})]})}export{G as Login};
