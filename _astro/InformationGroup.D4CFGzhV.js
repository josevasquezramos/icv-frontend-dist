import{j as e,c as j}from"./config.DA722Lej.js";import{r as d}from"./index.BVn2TZg3.js";import{B as v,G as I,S as E,A as C,a as k,b as S}from"./site-header.CcIO_pl4.js";import{c as h}from"./createLucideIcon.Cw3puCNq.js";import{S as T,U as L}from"./users.BmZTO0FZ.js";import{C as $,a as B}from"./clock.DgRlrvGp.js";import{E as D}from"./external-link.BDH-xG-P.js";import"./toggle-group.HmdkyvE9.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],M=h("arrow-left",z);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],H=h("award",O);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],J=h("circle-check",V);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Q=h("ellipsis-vertical",F);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],q=h("user",W);function K({group:s,user:t,token:i,onBack:m,onRefresh:r}){const[x,n]=d.useState(!1),N=o=>{switch(o.toLowerCase()){case"completed":case"aprobado":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";case"open":case"pending":case"pendiente":return"bg-amber-500/20 text-amber-400 border-amber-500/30";case"draft":case"rechazado":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},w=o=>{switch(o.toLowerCase()){case"completed":return"Completado";case"open":return"Abierto";case"draft":return"Borrador";default:return o}},b=async()=>{if(!(!i||!s)){n(!0);try{const o=i.replace(/^"|"$/g,""),p=`${j.apiUrl}${j.endpoints.groups.join}`.replace(":id",s.id.toString()),u=await fetch(p,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}),c=await u.json();if(!u.ok)throw new Error(c.message||"Error al unirse al grupo");alert("¡Te has unido al grupo exitosamente!"),r()}catch(o){console.error("Error joining group:",o),alert(o instanceof Error?o.message:"Error al unirse al grupo")}finally{n(!1)}}},g=t&&s.participants.some(o=>o.id===t?.id);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("button",{onClick:()=>{const p=new URLSearchParams(window.location.search).get("courseId");window.location.href=`/academico/dashboard/grupos-disponibles?courseId=${p}`},className:"flex items-center gap-2 text-[#848282] hover:text-white transition-colors group z-50",children:[e.jsx(M,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"font-medium",children:"Volver a Mis Grupos"})]}),e.jsxs("div",{className:"flex items-center gap-3 z-50",children:[e.jsx("button",{onClick:()=>window.location.href=`/academico/dashboard/courses/modulo-educativo?groupId=${s.id}`,className:"p-2 hover:bg-[#201a2f] rounded-lg transition-colors border border-[#848282]/20",children:e.jsx(T,{className:"w-5 h-5 text-[#848282] hover:text-blue-400 transition-colors"})}),e.jsx("button",{onClick:()=>window.location.href=`/academico/dashboard/gestion-grupos?groupId=${s.id}`,className:"p-2 hover:bg-[#201a2f] rounded-lg transition-colors border border-[#848282]/20",children:e.jsx(Q,{className:"w-5 h-5 text-[#848282]"})})]})]}),e.jsxs("div",{className:"relative bg-gradient-to-br from-[#201a2f] via-[#111115] to-[#000000] rounded-2xl p-8 md:p-10 border border-[#848282]/20 shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/5 via-transparent to-blue-500/5"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-purple-500/10 border border-purple-500/30 rounded-full mb-4",children:[e.jsx(H,{className:"w-4 h-4 text-purple-400"}),e.jsxs("span",{className:"text-xs font-medium text-purple-400",children:["Grupo #",s.id]})]}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4 leading-tight",children:s.name}),e.jsx("p",{className:"text-[#848282] text-base md:text-lg leading-relaxed mb-4",children:s.description}),e.jsx("div",{className:"flex items-center gap-3 flex-wrap",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full border font-medium text-sm ${N(s.status)}`,children:[e.jsx(J,{className:"w-4 h-4"}),w(s.status)]})}),t&&!g&&e.jsx("div",{className:"mt-4 relative z-50",children:e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-full font-medium text-sm transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",onClick:b,disabled:x,children:[e.jsx(L,{className:"w-4 h-4"}),x?"Uniéndose...":"Unirme a este Grupo"]})})]})})]})]})]})}function X({group:s}){const t=i=>new Date(i).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});return e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"group bg-[#111115] hover:bg-[#201a2f] p-6 rounded-xl border border-[#848282]/20 shadow-lg hover:shadow-xl transition-all duration-300 hover:border-blue-500/40",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2.5 bg-blue-500/20 rounded-lg group-hover:bg-blue-500/30 transition-colors",children:e.jsx($,{className:"w-5 h-5 text-blue-400"})}),e.jsx("span",{className:"text-sm font-medium text-[#848282]",children:"Inicio"})]}),e.jsx("p",{className:"text-base font-semibold text-white",children:t(s.start_date)})]}),e.jsxs("div",{className:"group bg-[#111115] hover:bg-[#201a2f] p-6 rounded-xl border border-[#848282]/20 shadow-lg hover:shadow-xl transition-all duration-300 hover:border-purple-500/40",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2.5 bg-purple-500/20 rounded-lg group-hover:bg-purple-500/30 transition-colors",children:e.jsx($,{className:"w-5 h-5 text-purple-400"})}),e.jsx("span",{className:"text-sm font-medium text-[#848282]",children:"Fin"})]}),e.jsx("p",{className:"text-base font-semibold text-white",children:t(s.end_date)})]}),e.jsxs("div",{className:"group bg-[#111115] hover:bg-[#201a2f] p-6 rounded-xl border border-[#848282]/20 shadow-lg hover:shadow-xl transition-all duration-300 hover:border-emerald-500/40",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2.5 bg-emerald-500/20 rounded-lg group-hover:bg-emerald-500/30 transition-colors",children:e.jsx(L,{className:"w-5 h-5 text-emerald-400"})}),e.jsx("span",{className:"text-sm font-medium text-[#848282]",children:"Miembros"})]}),e.jsx("p",{className:"text-base font-semibold text-white",children:s.participants.length})]}),e.jsxs("div",{className:"group bg-[#111115] hover:bg-[#201a2f] p-6 rounded-xl border border-[#848282]/20 shadow-lg hover:shadow-xl transition-all duration-300 hover:border-amber-500/40",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2.5 bg-amber-500/20 rounded-lg group-hover:bg-amber-500/30 transition-colors",children:e.jsx(v,{className:"w-5 h-5 text-amber-400"})}),e.jsx("span",{className:"text-sm font-medium text-[#848282]",children:"Clases"})]}),e.jsx("p",{className:"text-base font-semibold text-white",children:s.classes.length})]})]})}function Y({participants:s}){return e.jsxs("div",{className:"bg-[#111115] rounded-xl border border-[#848282]/20 shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-[#201a2f] px-6 py-5 border-b border-[#848282]/20",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(L,{className:"w-5 h-5 text-blue-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Participantes"})]}),e.jsx("span",{className:"bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-xs font-medium border border-blue-500/30",children:s.length})]})}),e.jsx("div",{className:"divide-y divide-[#848282]/10 max-h-96 overflow-y-auto",children:s.map(t=>e.jsx("div",{className:"px-6 py-4 hover:bg-[#201a2f] transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`p-2 rounded-full flex-shrink-0 transition-all ${t.role==="Instructor"?"bg-purple-500/20 group-hover:bg-purple-500/30":"bg-[#848282]/20 group-hover:bg-[#848282]/30"}`,children:t.role==="Instructor"?e.jsx(I,{className:"w-5 h-5 text-purple-400"}):e.jsx(q,{className:"w-5 h-5 text-[#848282]"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-white text-sm truncate",children:t.name}),t.expertise_area&&e.jsx("p",{className:"text-xs text-[#848282] mt-0.5 truncate",children:t.expertise_area})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border flex-shrink-0 ${t.role==="Instructor"?"bg-purple-500/20 text-purple-400 border-purple-500/30":"bg-[#848282]/20 text-[#848282] border-[#848282]/30"}`,children:t.role})]})},t.id))})]})}function Z({classes:s,groupId:t}){const i=r=>new Date(r).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),m=r=>{const x=t||new URLSearchParams(window.location.search).get("groupId")||"";window.location.href=`/academico/dashboard/courses/clase?classId=${r}&groupId=${x}`};return e.jsxs("div",{className:"bg-[#111115] rounded-xl border border-[#848282]/20 shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-[#201a2f] px-6 py-5 border-b border-[#848282]/20",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:e.jsx(v,{className:"w-5 h-5 text-emerald-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Clases"})]}),e.jsx("span",{className:"bg-emerald-500/20 text-emerald-400 px-3 py-1 rounded-full text-xs font-medium border border-emerald-500/30",children:s.length})]})}),e.jsx("div",{className:"divide-y divide-[#848282]/10 max-h-96 overflow-y-auto",children:s.length===0?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(v,{className:"w-12 h-12 text-[#848282] mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-[#848282] text-sm",children:"No hay clases programadas aún"})]}):s.map(r=>e.jsxs("div",{onClick:()=>m(r.id),className:"px-6 py-4 hover:bg-[#201a2f] transition-all duration-200 group cursor-pointer relative",children:[e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("h4",{className:"font-semibold text-white text-base group-hover:text-emerald-400 transition-colors flex items-center gap-2",children:[r.class_name,e.jsx(D,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]}),r.description&&e.jsx("p",{className:"text-sm text-[#848282] line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#848282]",children:[e.jsx($,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),e.jsx("span",{children:i(r.class_date)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[#848282]",children:[e.jsx(B,{className:"w-4 h-4 text-purple-400 flex-shrink-0"}),e.jsxs("span",{children:[r.start_time," - ",r.end_time]})]})]}),r.class_status&&e.jsx("div",{className:"pt-2",children:e.jsxs("span",{className:`
                        px-2 py-1 rounded text-xs font-medium border
                        ${r.class_status==="SCHEDULED"?"bg-blue-500/10 text-blue-400 border-blue-500/30":""}
                        ${r.class_status==="IN_PROGRESS"?"bg-green-500/10 text-green-400 border-green-500/30":""}
                        ${r.class_status==="COMPLETED"?"bg-gray-500/10 text-gray-400 border-gray-500/30":""}
                        ${r.class_status==="CANCELLED"?"bg-red-500/10 text-red-400 border-red-500/30":""}
                      `,children:[r.class_status==="SCHEDULED"&&"Programada",r.class_status==="IN_PROGRESS"&&"En Progreso",r.class_status==="COMPLETED"&&"Completada",r.class_status==="CANCELLED"&&"Cancelada",!["SCHEDULED","IN_PROGRESS","COMPLETED","CANCELLED"].includes(r.class_status)&&r.class_status]})})]})}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:e.jsx(D,{className:"w-4 h-4 text-emerald-400"})})})]},r.id))})]})}function ee({courses:s}){return e.jsx("div",{className:"bg-gradient-to-br from-[#201a2f] via-[#111115] to-[#000000] rounded-2xl p-8 md:p-10 border border-[#848282]/20 shadow-2xl overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"Cursos Recomendados"}),e.jsx("p",{className:"text-[#848282]",children:"Continúa tu aprendizaje con estos cursos relacionados"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(t=>e.jsxs("div",{className:"group bg-[#111115] hover:bg-[#201a2f] p-6 rounded-xl border border-[#848282]/20 shadow-lg hover:shadow-xl transition-all duration-300 hover:border-amber-500/40 cursor-pointer",onClick:()=>window.location.href="/academico/dashboard/catalogo",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsx("div",{className:"p-2.5 bg-amber-500/20 rounded-lg group-hover:bg-amber-500/30 transition-colors",children:e.jsx(v,{className:"w-5 h-5 text-amber-400"})}),e.jsx("span",{className:"text-xs px-2.5 py-1 bg-amber-500/20 text-amber-400 rounded-full border border-amber-500/30 font-medium",children:"Recomendado"})]}),e.jsx("h3",{className:"font-semibold text-white text-lg group-hover:text-amber-400 transition-colors mb-3 line-clamp-2",children:t.previous_course_title}),e.jsx("p",{className:"text-sm text-[#848282] mb-4",children:"Complementa tu formación con este curso relacionado"}),e.jsx("button",{className:"w-full px-4 py-2 bg-amber-500/20 hover:bg-amber-500/30 text-amber-400 rounded-lg font-medium transition-all border border-amber-500/30 hover:border-amber-500/50 text-sm",children:"Ver Curso"})]},t.previous_course_id))})]})})}function de(){const[s,t]=d.useState(null),[i,m]=d.useState(null),[r,x]=d.useState(!1),[n,N]=d.useState(null),[w,b]=d.useState(!0),[g,o]=d.useState(null);d.useEffect(()=>{const c=window.localStorage.getItem("token"),f=window.localStorage.getItem("user");t(c??null);try{m(f?JSON.parse(f):null)}catch{m(null)}x(!0)},[]),d.useEffect(()=>{!r||!s||p()},[r,s]);const p=async()=>{b(!0),o(null);try{const f=new URLSearchParams(window.location.search).get("groupId")||"1",P=s.replace(/^"|"$/g,""),U=`${j.apiUrl}${j.endpoints.groups.getById}`.replace(":id",f),y=await fetch(U,{method:"GET",headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});if(!y.ok)throw new Error(`Error al cargar el grupo: ${y.status}`);const G=await y.json(),l=G.group||G;console.log("groupData: ",l);const _=[];if(l.participants?.teacher){const a=l.participants.teacher;_.push({id:a.id,name:a.full_name||`${a.first_name} ${a.last_name}`,full_name:a.full_name||`${a.first_name} ${a.last_name}`,role:"Instructor",expertise_area:void 0})}Array.isArray(l.participants?.students)&&l.participants.students.forEach(a=>{_.push({id:a.id,name:a.name||a.full_name||`Estudiante ${a.id}`,full_name:a.name||a.full_name||`Estudiante ${a.id}`,role:a.role||"Estudiante",expertise_area:a.expertise_area})}),console.log("clases: ",l.classes);const R=(l.classes||[]).map(a=>({id:a.id,class_name:a.class_name,class_date:a.class_date,start_time:a.start_time,end_time:a.end_time,description:a.description,class_status:a.class_status})),A={id:l.id,name:l.name,description:l.description||"Sin descripción disponible",status:l.status||"Pendiente",start_date:l.start_date,end_date:l.end_date,participants:_,classes:R,previous_courses:l.previous_courses||[]};N(A)}catch(c){console.error("Error fetching group:",c),o(c instanceof Error?c.message:"Error al cargar el grupo")}finally{b(!1)}},u=()=>{window.location.href="/academico/dashboard/grupos-disponibles"};return!r||w?e.jsxs(E,{style:{"--sidebar-width":"calc(var(--spacing) * 72)","--header-height":"calc(var(--spacing) * 12)"},children:[e.jsx(C,{variant:"inset",token:s,user:i}),e.jsxs(k,{children:[e.jsx(S,{title:"Información de Grupos"}),e.jsx("div",{className:"flex flex-1 flex-col bg-[#0f0f02]",children:e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-[#848282]/20 border-t-purple-500 mb-4"}),e.jsx("p",{className:"text-[#848282] text-lg",children:"Cargando información del grupo..."})]})})})]})]}):g||!n?e.jsxs(E,{style:{"--sidebar-width":"calc(var(--spacing) * 72)","--header-height":"calc(var(--spacing) * 12)"},children:[e.jsx(C,{variant:"inset",token:s,user:i}),e.jsxs(k,{children:[e.jsx(S,{title:"Información de Grupos"}),e.jsx("div",{className:"flex flex-1 flex-col bg-[#0f0f02]",children:e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-red-400 text-lg",children:g||"No se pudo cargar el grupo"}),e.jsx("button",{onClick:u,className:"px-6 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded-lg font-medium transition-all border border-blue-500/30",children:"Volver a Mis Grupos"})]})})})]})]}):e.jsxs(E,{style:{"--sidebar-width":"calc(var(--spacing) * 72)","--header-height":"calc(var(--spacing) * 12)"},children:[e.jsx(C,{variant:"inset",token:s,user:i}),e.jsxs(k,{children:[e.jsx(S,{title:"Información de Grupos"}),e.jsx("div",{className:"flex flex-1 flex-col bg-[#0f0f02]",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:e.jsx("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6",children:e.jsx("section",{className:"px-4 pb-8 md:px-8 lg:px-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx(K,{group:n,user:i,token:s,onBack:u,onRefresh:p}),e.jsx(X,{group:n}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Y,{participants:n.participants}),e.jsx(Z,{classes:n.classes})]}),e.jsx("div",{className:"bg-gradient-to-r from-[#201a2f]/50 to-[#111115]/50 rounded-xl p-6 border border-[#848282]/20",children:e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"¿Buscas otro grupo?"}),e.jsx("p",{className:"text-sm text-[#848282]",children:"Explora todos tus grupos de capacitación"})]}),e.jsx("button",{onClick:u,className:"px-6 py-2.5 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded-lg font-medium transition-all border border-blue-500/30 hover:border-blue-500/50",children:"Ver Todos los Grupos"})]})}),n.previous_courses&&n.previous_courses.length>0&&e.jsx(ee,{courses:n.previous_courses})]})})})})})]})]})}export{de as default};
